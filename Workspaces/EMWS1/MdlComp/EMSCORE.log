*------------------------------------------------------------*
* Score Log
Date:                October 23, 2020
Time:                19:47:25
*------------------------------------------------------------*
NOTE: View EMWS1.NEURAL_TRAIN.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.06 seconds
      
NOTE: View EMWS1.NEURAL_TRAIN.VIEW used (Total process time):
      real time           0.11 seconds
      cpu time            0.10 seconds
      
12143  /* Generate assessment metadata, which will be used to generate assessment data step */
12144  /* code, such as retrieving names of temporary variables and summary variables,      */
12145  /* labels, etc.  It is used in almost all the assessment computations such as lift,  */
12146  /* roc, index, scoreDist and could be thought as a global variable in assessment     */
12147  /* computation.                                                                      */
12148  data work.ASSESS_1WBTA4S_assessMeta_eJTifV;
12149  length VARIABLE $32 FORMAT $44 TYPE $32 PARENT $32 LEVEL $32 PROPERTY $32 MEASUREMENT
12149! $10 LAST_LEVEL $32 GEN_VAR_IN_TEMP_DATA $32 RESULT_MEAN $32 RESULT_MEAN_LABEL $100
12149! RESULT_MIN $32 RESULT_MIN_LABEL $100 MIN_ADJUSTED $32 RESULT_MAX $32 RESULT_MAX_LABEL
12150     $100 MAX_ADJUSTED $32 RESULT_COUNT $32 RESULT_COUNT_LABEL $100 TEMPORARY_VARIABLE $32
12150! ;
12151  VARIABLE = "Churned";
12152  PARENT = "";
12153  FORMAT = "";
12154  TYPE = "";
12155  LEVEL = '';
12156  PROPERTY = "TARGET";
12157  MEASUREMENT = "NOMINAL";
12158  LAST_LEVEL = '';
12159  GEN_VAR_IN_TEMP_DATA = "Churned";
12160  RESULT_MEAN = "";
12161  RESULT_MEAN_LABEL = "";
12162  RESULT_MIN = "";
12163  RESULT_MIN_LABEL = "";
12164  MIN_ADJUSTED = "";
12165  RESULT_MAX = "";
12166  RESULT_MAX_LABEL = "";
12167  MAX_ADJUSTED = "";
12168  RESULT_COUNT = "";
12169  RESULT_COUNT_LABEL = "";
12170  TEMPORARY_VARIABLE = "Churned_Ndb1daGMzrMsvTs";
12171  output;
12172  VARIABLE = "F_Churned_YES";
12173  FORMAT = "";
12174  TYPE = "";
12175  PARENT = "F_Churned";
12176  LEVEL = "YES";
12177  PROPERTY = "TARGET_LEVEL";
12178  MEASUREMENT = "INTERVAL";
12179  LAST_LEVEL = "NO";
12180  GEN_VAR_IN_TEMP_DATA = "F_Churned_YES_at0Jmjz4TgogrtT";
12181  RESULT_MEAN = "F_Churned__mean_fvM7zHHJBlhRnsV";
12182  /* adjust for tied cases */
12183  RESULT_MEAN_LABEL = "";
12184  RESULT_MIN = "";
12185  RESULT_MIN_LABEL = "";
12186  RESULT_MAX = "";
12187  RESULT_MAX_LABEL = "";
12188  RESULT_COUNT = "NumberOfEvents";
12189  RESULT_COUNT_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_NumEvent_vlabel, NOQUOTE))";
12190  TEMPORARY_VARIABLE = "F_Churned_YES_tCNm1UY6dv_QveY";
12191  output;
12192  VARIABLE = "F_Churned_NO";
12193  FORMAT = "";
12194  TYPE = "";
12195  PARENT = "F_Churned";
12196  LEVEL = "NO";
12197  PROPERTY = "TARGET_LEVEL";
12198  MEASUREMENT = "INTERVAL";
12199  LAST_LEVEL = "NO";
12200  GEN_VAR_IN_TEMP_DATA = "F_Churned_NO_5DElljKK0QFVD5D";
12201  RESULT_MEAN = "F_Churned__mean_ao5LuZJny96lIKh";
12202  /* adjust for tied cases */
12203  RESULT_MEAN_LABEL = "";
12204  RESULT_MIN = "";
12205  RESULT_MIN_LABEL = "";
12206  RESULT_MAX = "";
12207  RESULT_MAX_LABEL = "";
12208  RESULT_COUNT = "NumberOfEvents";
12209  RESULT_COUNT_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_NumEvent_vlabel, NOQUOTE))";
12210  TEMPORARY_VARIABLE = "F_Churned_NO_I4jCm5rW_X7hUPi";
12211  output;
12212  VARIABLE = "P_ChurnedYes";
12213  FORMAT = "";
12214  TYPE = "";
12215  PARENT = "";
12216  LEVEL = "YES";
12217  PROPERTY = "POSTERIOR_LEVEL";
12218  MEASUREMENT = "INTERVAL";
12219  LAST_LEVEL = "";
12220  GEN_VAR_IN_TEMP_DATA = "P_ChurnedYes";
12221  RESULT_MEAN = "_meanP_";
12222  RESULT_MEAN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMean_vlabel, NOQUOTE))";
12223  RESULT_MIN = "_minP_";
12224  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMin_vlabel, NOQUOTE))";
12225  MIN_ADJUSTED = "P_Churne_minAdjusted_6hENERowm";
12226  RESULT_MAX = "_maxP_";
12227  RESULT_MAX_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMax_vlabel, NOQUOTE))";
12228  MAX_ADJUSTED = "P_Churne_maxAdjusted_ULE0Og1LB";
12229  RESULT_COUNT = "";
12230  RESULT_COUNT_LABEL = "";
12231  TEMPORARY_VARIABLE = "P_ChurnedYes_xPX6TgTJozbjczh";
12232  output;
12233  VARIABLE = "P_ChurnedNo";
12234  FORMAT = "";
12235  TYPE = "";
12236  PARENT = "";
12237  LEVEL = "NO";
12238  PROPERTY = "POSTERIOR_LEVEL";
12239  MEASUREMENT = "INTERVAL";
12240  LAST_LEVEL = "";
12241  GEN_VAR_IN_TEMP_DATA = "P_ChurnedNo";
12242  RESULT_MEAN = "_meanP_";
12243  RESULT_MEAN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMean_vlabel, NOQUOTE))";
12244  RESULT_MIN = "_minP_";
12245  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMin_vlabel, NOQUOTE))";
12246  MIN_ADJUSTED = "P_Churne_minAdjusted_Nt2rMrI1B";
12247  RESULT_MAX = "_maxP_";
12248  RESULT_MAX_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMax_vlabel, NOQUOTE))";
12249  MAX_ADJUSTED = "P_Churne_maxAdjusted_7v_8OmUx6";
12250  RESULT_COUNT = "";
12251  RESULT_COUNT_LABEL = "";
12252  TEMPORARY_VARIABLE = "P_ChurnedNo_OaL7_qj8M1c5Rgr";
12253  output;
12254  run;

NOTE: The data set WORK.ASSESS_1WBTA4S_ASSESSMETA_EJTIFV has 5 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12255  /* Generate temporary dataset and obtain summary statistics such as total number of   */
12256  /* obserations, frequency of target.  However, summary statistics for class reporting */
12257  /* variabels are not computed here since if there exist class reporting variables,    */
12258  /* then PROC DMDB will be called. And there is no need to compute interval reporting  */
12259  /* summary statisitcs, if any.                                                        */
12260  data work.ASSESS_1WBTA4S_normSD_o3nbO7(drop=
12261  _numberOfObservation_
12262  _levelFrequency_1
12263  _levelFrequency_2
12264  )
12265  work.ASSESS_1WBTA4S_meansAndTi_ImzSLW (keep=
12266  _numberOfObservation_
12267  _levelFrequency_1
12268  _levelFrequency_2
12269  );
12270  set EMWS1.Neural_TRAIN(
12271  where=(
12272  (Churned ^= ' ')
12273  )
12274  ) end=_lastObservation_;
12275  keep frequency_xavMqc;
12276  frequency_xavMqc = 1;
12277  keep I_Churned F_Churned;
12278  keep F_Churned_YES_at0Jmjz4TgogrtT;
12279  if (F_Churned = 'YES') then do;
12280  F_Churned_YES_at0Jmjz4TgogrtT = 1;
12281  end;
12282  else do;
12283  F_Churned_YES_at0Jmjz4TgogrtT = 0;
12284  end;
12285  keep F_Churned_NO_5DElljKK0QFVD5D;
12286  if (F_Churned = 'NO') then do;
12287  F_Churned_NO_5DElljKK0QFVD5D = 1;
12288  end;
12289  else do;
12290  F_Churned_NO_5DElljKK0QFVD5D = 0;
12291  end;
12292  keep P_ChurnedYes;
12293  keep P_ChurnedNo;
12294  output work.ASSESS_1WBTA4S_normSD_o3nbO7;
12295  keep _numberOfObservation_;
12296  retain _numberOfObservation_ 0;
12297  _numberOfObservation_ + frequency_xavMqc;
12298  keep _levelFrequency_1;
12299  retain _levelFrequency_1 0;
12300  if (F_Churned = 'YES') then do;
12301  _levelFrequency_1 + frequency_xavMqc;
12302  end;
12303  keep _levelFrequency_2;
12304  retain _levelFrequency_2 0;
12305  if (F_Churned = 'NO') then do;
12306  _levelFrequency_2 + frequency_xavMqc;
12307  end;
12308  if _lastObservation_ then do;
12309  output work.ASSESS_1WBTA4S_meansAndTi_ImzSLW;
12310  end;
12311  run;

NOTE: There were 5383 observations read from the data set EMWS1.PART_TRAIN.
NOTE: View EMWS1.NEURAL_TRAIN.VIEW used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
      
NOTE: There were 5383 observations read from the data set EMWS1.VARCLUS_TRAIN.
NOTE: There were 5383 observations read from the data set EMWS1.NEURAL_TRAIN.
      WHERE Churned not = ' ';
NOTE: The data set WORK.ASSESS_1WBTA4S_NORMSD_O3NBO7 has 5383 observations and 7 variables.
NOTE: The data set WORK.ASSESS_1WBTA4S_MEANSANDTI_IMZSLW has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.07 seconds
      

12312  data WORK._EMRANK;
12313  set EMWS1.MdlComp_EMRANK;
12314  where MODEL = "Neural" and TARGET = "Churned" and dataRole="TRAIN";
12315  run;

NOTE: There were 20 observations read from the data set EMWS1.MDLCOMP_EMRANK.
      WHERE (MODEL='Neural') and (TARGET='Churned') and (dataRole='TRAIN');
NOTE: The data set WORK._EMRANK has 20 observations and 38 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12316  data work._augment;
12317  do BIN= 1 to 20;
12318  DECILE = BIN*5;
12319  output;
12320  end;
12321  run;

NOTE: The data set WORK._AUGMENT has 20 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12322  data WORK._EMRANK;
12323  merge WORK._AUGMENT WORK._EMRANK;
12324  by BIN;
12325  run;

NOTE: There were 20 observations read from the data set WORK._AUGMENT.
NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 38 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12326  data WORK._EMRANK;
12327  set WORK._EMRANK end=_lastObservation_;
12328  retain _previousMinP_ _previousMaxP_;
12329  retain _group_ 1;
12330  keep event;
12331  keep bin _cutoff_ _group_;
12332  if (bin > 1) then do;
12333  bin = bin - 1;
12334  _cutoff_ = (_maxP_ + _previousMinP_) / 2;
12335  if (abs(_previousMaxP_ - _previousMinP_) < 1E-6) then do;
12336  /* tied */
12337  _cutoff_ = max((_minP_ + _maxP_)/2, min(_cutoff_, _previousMinP_/*-1E-6*/
12338  ));
12339  end;
12340  else if (abs(_maxP_ - _minP_) < 1E-6) then do;
12341  /* next tied */
12342  _cutoff_ = min((_previousMinP_ + _previousMaxP_)/2, max(_cutoff_, _maxP_/*+ 1E-6*/
12343  ));
12344  end;
12345  output;
12346  *if ( abs((_maxP_ +_minP_)/2 - (_previousMaxP_ + _previousMinP_)/2) > 1E-6) then do;
12347  * _group_ + 1;
12348  *end;
12349  if (_maxP_ le _previousMinP_ - 1E-6) then do;
12350  _group_ + 1;
12351  end;
12352  else if (abs(_maxP_ - _previousMinP_) < 1E-6) then do;
12353  if (abs(_maxP_ - _minP_) > 1E-6) then do;
12354  _group_ + 1;
12355  end;
12356  end;
12357  bin + 1;
12358  /* correct the previous change */
12359  end;
12360  if (_lastObservation_) then do;
12361  _cutoff_ = .;
12362  output;
12363  end;
12364  _previousMinP_ = _minP_;
12365  _previousMaxP_ = _maxP_;
12366  run;

NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12367  data WORK._EMRANK;
12368  set WORK._EMRANK;
12369  by _group_;
12370  retain _start_;
12371  if (first._group_) then do;
12372  _start_ = _n_;
12373  end;
12374  if (last._group_) then do;
12375  _end_ = _n_;
12376  output;
12377  end;
12378  run;

NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of 
      this session.
12379  filename emflow "C:\Users\20161277\Documents\CA Assignment
12379! 3\Workspaces\EMWS1\MdlComp\EMFLOWSCORE.sas";
12380  *------------------------------------------------------------*;
12381  * MdlComp: Scoring NEURAL_TRAIN data;
12382  *------------------------------------------------------------*;
12383  data EMWS1.MdlComp_TRAIN
12384  / view=EMWS1.MdlComp_TRAIN
12385  ;
12386  set EMWS1.Neural_TRAIN
12387  ;
12388  %inc emflow;
12468  run;

NOTE: DATA STEP view saved on file EMWS1.MDLCOMP_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.NEURAL_TRAIN.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
      

12469  quit;
12470  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

12471  filename emflow "C:\Users\20161277\Documents\CA Assignment
12471! 3\Workspaces\EMWS1\MdlComp\EMFLOWSCORE.sas";
12472  *------------------------------------------------------------*;
12473  * MdlComp: Scoring NEURAL_VALIDATE data;
12474  *------------------------------------------------------------*;
12475  data EMWS1.MdlComp_VALIDATE
12476  / view=EMWS1.MdlComp_VALIDATE
12477  ;
12478  set EMWS1.Neural_VALIDATE
12479  ;
12480  %inc emflow;
12560  run;

NOTE: DATA STEP view saved on file EMWS1.MDLCOMP_VALIDATE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.NEURAL_VALIDATE.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.07 seconds
      cpu time            0.06 seconds
      

12561  quit;
12562  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

12563  filename emflow "C:\Users\20161277\Documents\CA Assignment
12563! 3\Workspaces\EMWS1\MdlComp\EMFLOWSCORE.sas";
12564  *------------------------------------------------------------*;
12565  * MdlComp: Scoring NEURAL_TEST data;
12566  *------------------------------------------------------------*;
12567  data EMWS1.MdlComp_TEST
12568  / view=EMWS1.MdlComp_TEST
12569  ;
12570  set EMWS1.Neural_TEST
12571  ;
12572  %inc emflow;
12652  run;

NOTE: DATA STEP view saved on file EMWS1.MDLCOMP_TEST.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.NEURAL_TEST.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.07 seconds
      cpu time            0.06 seconds
      

12653  quit;
12654  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

12655  *------------------------------------------------------------*;
12656  * MdlComp: Computing metadata for TRAIN data;
12657  *------------------------------------------------------------*;

NOTE: View EMWS1.MDLCOMP_TRAIN.VIEW used (Total process time):
      real time           0.08 seconds
      cpu time            0.07 seconds
      
NOTE: View EMWS1.MDLCOMP_TRAIN.VIEW used (Total process time):
      real time           0.08 seconds
      cpu time            0.07 seconds
      
NOTE: View EMWS1.MDLCOMP_VALIDATE.VIEW used (Total process time):
      real time           0.08 seconds
      cpu time            0.07 seconds
      
NOTE: View EMWS1.MDLCOMP_TEST.VIEW used (Total process time):
      real time           0.08 seconds
      cpu time            0.07 seconds
      
