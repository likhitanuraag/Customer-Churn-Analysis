*------------------------------------------------------------*
* Report Log
Date:                October 24, 2020
Time:                18:48:43
*------------------------------------------------------------*
11832  data WORK.M2O3ECV7;
11833  set WORK.M2O3ECV7;
11834  if role eq 'REJECTED' then role = 'INPUT';
11835  run;

NOTE: There were 10 observations read from the data set WORK.M2O3ECV7.
NOTE: The data set WORK.M2O3ECV7 has 10 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

11836  data WORK.M2O3ECV7;
11837  set WORK.M2O3ECV7 end=_eof_ nobs=_nobs_;
11838  output;
11839  if _eof_ then do;
11840  name = '_SEGMENT_';
11841  ROLE = 'TARGET';
11842  LEVEL = 'NOMINAL';
11843  LABEL = 'Segment Variable';
11844  TYPE = 'N';
11845  FORMAT = '';
11846  INFORMAT = '';
11847  USE='Y';
11848  output;
11849  end;
11850  run;

NOTE: There were 10 observations read from the data set WORK.M2O3ECV7.
NOTE: The data set WORK.M2O3ECV7 has 11 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

11851  *------------------------------------------------------------*;
11852  * Clus: Create decision matrix;
11853  *------------------------------------------------------------*;
11854  *------------------------------------------------------------* ;
11855  * Clus: Tree Variables Macro ;
11856  *------------------------------------------------------------* ;
11857  %macro EM_TREEVARS;
11858      Age Balance Country CreditScore EstimatedSalary Gender HasCreditCard
11859     IsActiveMember NumOfProducts Tenure
11860  %mend EM_TREEVARS;
11861  *------------------------------------------------------------* ;
11862  * Clus: Tree Targets Macro ;
11863  *------------------------------------------------------------* ;
11864  %macro EM_TREETARGETS;
11865      _SEGMENT_
11866  %mend EM_TREETARGETS;
11867  data EMWS1.EM_Clus / view=EMWS1.EM_Clus;
11868  set EMWS1.Clus_TRAIN(keep=%EM_TREEVARS %EM_TREETARGETS);
11869  run;

NOTE: DATA STEP view saved on file EMWS1.EM_CLUS.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.08 seconds
      cpu time            0.07 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.10 seconds
      cpu time            0.09 seconds
      

11870  *------------------------------------------------------------* ;
11871  * Clus: Interval Inputs Macro ;
11872  *------------------------------------------------------------* ;
11873  %macro INTINPUTS;
11874      Age Balance CreditScore EstimatedSalary NumOfProducts Tenure
11875  %mend INTINPUTS;
11876  *------------------------------------------------------------* ;
11877  * Clus: Binary and Nominal Inputs Macro ;
11878  *------------------------------------------------------------* ;
11879  %macro NOMINPUTS;
11880      Country Gender HasCreditCard IsActiveMember
11881  %mend NOMINPUTS;
11882  *------------------------------------------------------------* ;
11883  * Clus: Ordinal Inputs Macro ;
11884  *------------------------------------------------------------* ;
11885  %macro ORDINPUTS;
11886  
11887  %mend ORDINPUTS;
11888  *------------------------------------------------------------*;
11889  * Clus: Run ARBOR procedure;
11890  *------------------------------------------------------------*;

11891  proc arbor data=EMWS1.EM_Clus
11892  MAXSURRS=5
11893  ;
11894  ;
11895  input %INTINPUTS
11896  / level = interval;
11897  input %NOMINPUTS
11898  / level=nominal;
11899  target _SEGMENT_ / level=NOMINAL
11900  Criterion=PROBCHISQ
11901  ;
11902  ;
11903  Performance DISK
11904  ;
11905  MAKEMACRO NLEAVES=nleaves;
NOTE: 1438383 kilobytes of physical memory.
NOTE: Will use 2037 out of 2037 training cases.
NOTE: Using memory pool with 91652096 bytes.
NOTE: Passed training data 18 times.
NOTE: Training used 580776 bytes of work memory.
NOTE: The subtree sequence contains 15 subtrees. The largest has 29 nodes and 15 leaves.
NOTE: Using subtree with 17 nodes and 9 leaves.
NOTE: Created macro variable NLEAVES equal to 9.
11906  save
11907  MODEL=EMWS1.Clus_PLOTDS
11908  SEQUENCE=EMWS1.Clus_OUTSEQ
11909  IMPORTANCE=EMWS1.Clus_OUTIMPORT
11910  NODESTAT=EMWS1.Clus_OUTNODES
11911  SUMMARY=WORK.OUTSUMMARY_TREE_0R2J4SA
11912  STATSBYNODE=WORK.OUTSTATS_TREE_0R2J4SA
11913  Pathlistnonmissing = WORK.OUTPATH_TREE_0R2J4SA
11914  Rules = WORK.OUTRULES_TREE_0R2J4SA
11915  ;
NOTE: The data set EMWS1.CLUS_OUTIMPORT has 10 observations and 5 variables.
NOTE: The data set EMWS1.CLUS_PLOTDS has 1095 observations and 4 variables.
NOTE: The data set EMWS1.CLUS_OUTNODES has 17 observations and 26 variables.
NOTE: The data set WORK.OUTPATH_TREE_0R2J4SA has 84 observations and 7 variables.
NOTE: The data set WORK.OUTRULES_TREE_0R2J4SA has 230 observations and 6 variables.
NOTE: The data set EMWS1.CLUS_OUTSEQ has 15 observations and 11 variables.
NOTE: The data set WORK.OUTSTATS_TREE_0R2J4SA has 119 observations and 5 variables.
NOTE: The data set WORK.OUTSUMMARY_TREE_0R2J4SA has 24 observations and 8 variables.
11916  run;

11917  quit;

NOTE: There were 10000 observations read from the data set EMWS1.FIMPORT_DATA.
NOTE: There were 10000 observations read from the data set EMWS1.FIMPORT_TRAIN.
NOTE: There were 2037 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: View EMWS1.EM_CLUS.VIEW used (Total process time):
      real time           0.29 seconds
      cpu time            0.29 seconds
      
NOTE: There were 2037 observations read from the data set EMWS1.CLUS_TRAIN.
NOTE: There were 2037 observations read from the data set EMWS1.EM_CLUS.
NOTE: The data set WORK._NAMEDAT has 5 observations and 5 variables.
NOTE: PROCEDURE ARBOR used (Total process time):
      real time           0.31 seconds
      cpu time            0.31 seconds
      

11918  data EMWS1.Clus_OUTIMPORT;
11919  set EMWS1.Clus_OUTIMPORT;
11920  label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel, noquote))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, noquote))" NRULES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nrules_vlabel, noquote))" IMPORTANCE =
11921     "%sysfunc(sasmsg(sashelp.dmine, rpt_importance_vlabel, noquote))" NSURROGATES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nsurrogates_vlabel, noquote))"
11922  ;
11923  run;

NOTE: There were 10 observations read from the data set EMWS1.CLUS_OUTIMPORT.
NOTE: The data set EMWS1.CLUS_OUTIMPORT has 10 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

11924  filename x "C:\Users\20161277\Documents\CA Assignment 3\Workspaces\EMWS1\Clus\ENGLISHRULES.txt" encoding='utf-8' NOBOM;

11925  data temp;
11926  length varname $15;
11927  retain varname;
11928  set WORK.OUTPATH_TREE_0R2J4SA;
11929  if ^missing(variable) then varname=variable;
11930  else if ^missing(var_name) then varname=var_name;
11931  output;
11932  run;

NOTE: There were 84 observations read from the data set WORK.OUTPATH_TREE_0R2J4SA.
NOTE: The data set WORK.TEMP has 84 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11933  proc sort data=temp;
11934  by node;
11935  run;

NOTE: There were 84 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 84 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11936  proc sort data=EMWS1.Clus_OUTNODES out=outnodes;
11937  by node;
11938  run;

NOTE: There were 17 observations read from the data set EMWS1.CLUS_OUTNODES.
NOTE: The data set WORK.OUTNODES has 17 observations and 26 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11939  data temp;
11940  merge temp(in=_a) outnodes(keep= node
11941  NPRIORS
11942  P__SEGMENT_1
11943  P__SEGMENT_5
11944  P__SEGMENT_3
11945  P__SEGMENT_4
11946  P__SEGMENT_2
11947  );
11948  by node;
11949  if _a;
11950  run;

NOTE: There were 84 observations read from the data set WORK.TEMP.
NOTE: There were 17 observations read from the data set WORK.OUTNODES.
NOTE: The data set WORK.TEMP has 84 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11951  proc sort data=temp;
11952  by node descending varname descending numeric_value;
11953  run;

NOTE: There were 84 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 84 observations and 14 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11954  data _null_;
11955  file x;
11956  set temp;
11957  by node descending varname;
11958  retain origvar oldnode string;
11959  length origvar $32 oldnode 8 string $200;
11960  if _n_ = 1 then do;
11961  origvar = varname;
11962  oldnode = node;
11963  end;
11964  if first.node then do;
11965  put "&EM_CODEBAR";
11966  put " Node = " node;
11967  put "&EM_CODEBAR";
11968  end;
11969  if first.varname then do;
11970  if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
11971  if MISSING(CHARACTER_VALUE) then do;
11972  if NUMERIC_VALUE ne . then do;
11973  if ^first.node then do;
11974  string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
11975  end;
11976  else do;
11977  string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
11978  end;
11979  end;
11980  end;
11981  else do;
11982  if ^first.node then do;
11983  string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
11984  end;
11985  else do;
11986  string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
11987  end;
11988  end;
11989  end;
11990  else if RELATION in ("=") then do;
11991  if ^first.node then do;
11992  string = "AND "||strip(varname) ||" IS ONE OF: "||character_value;
11993  end;
11994  else do;
11995  string = "if "|| strip(varname) ||" IS ONE OF: "||character_value;
11996  end;
11997  end;
11998  else if RELATION in ("ISMISSING") then do;
11999  if ^first.node then do;
12000  string = " AND "|| strip(varname) || " equals Missing";
12001  end;
12002  else do;
12003  string = "if "|| strip(varname) ||" equals Missing";
12004  end;
12005  end;
12006  else if RELATION in ("ISNOTMISSING") then do;
12007  if ^first.node then do;
12008  string = " AND "|| strip(varname) || " equals All Values";
12009  end;
12010  else do;
12011  string = "if "|| strip(varname) ||" equals All Values";
12012  end;
12013  end;
12014  if ^missing(varname) then origvar = varname;
12015  oldnode=node;
12016  end;
12017  else do;
12018  if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
12019  if MISSING(CHARACTER_VALUE) then do;
12020  if NUMERIC_VALUE ne . then do;
12021  if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12022  else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12023  end;
12024  end;
12025  else do;
12026  if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12027  else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12028  end;
12029  end;
12030  else if RELATION in ("=") then do;
12031  string = strip(string)||", "||strip(character_value);
12032  end;
12033  else if RELATION in ("ISMISSING") then do;
12034  end;
12035  if ^missing(varname) then origvar = varname;
12036  oldnode=node;
12037  end;
12038  if last.varname then do;
12039  if RELATION in ("ISMISSING") then do;
12040  if ^first.varname then do;
12041  string = strip(string) || " or MISSING";
12042  end;
12043  end;
12044  put string;
12045  if ^missing(varname) then origvar = varname;
12046  oldnode=node;
12047  end;
12048  if last.node then do;
12049  put "then ";
12050  put " Tree Node Identifier   = " node;
12051  put " Number of Observations = " NPRIORS;
12052  put " Predicted: _SEGMENT_=1  = " P__SEGMENT_1;
12053  put " Predicted: _SEGMENT_=5  = " P__SEGMENT_5;
12054  put " Predicted: _SEGMENT_=3  = " P__SEGMENT_3;
12055  put " Predicted: _SEGMENT_=4  = " P__SEGMENT_4;
12056  put " Predicted: _SEGMENT_=2  = " P__SEGMENT_2;
12057  put " ";
12058  if ^missing(varname) then origvar = varname;
12059  oldnode=node;
12060  end;
12061  run;

NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      11974:67    11977:66    12021:108   12022:72    
NOTE: The file X is:
      Filename=C:\Users\20161277\Documents\CA Assignment 3\Workspaces\EMWS1\Clus\ENGLISHRULES.txt,
      RECFM=V,LRECL=131068,File Size (bytes)=0,
      Last Modified=24Oct2020:18:48:43,
      Create Time=19Oct2020:12:41:34

NOTE: 142 records were written to the file X.
      The minimum record length was 1.
      The maximum record length was 62.
NOTE: There were 84 observations read from the data set WORK.TEMP.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12062  filename x;
NOTE: Fileref X has been deassigned.

12063  /* belowtext */
12064  data templabel;
12065  set WORK.OUTRULES_TREE_0R2J4SA;
12066  if ((ROLE="PRIMARY") AND (STAT ="LABEL"));
12067  rename character_value = belowtext;
12068  keep NODE character_value;
12069  run;

NOTE: There were 230 observations read from the data set WORK.OUTRULES_TREE_0R2J4SA.
NOTE: The data set WORK.TEMPLABEL has 0 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12070  data tempvar;
12071  set WORK.OUTRULES_TREE_0R2J4SA;
12072  if ((ROLE="PRIMARY") AND (STAT="VARIABLE"));
12073  keep NODE character_value;
12074  run;

NOTE: There were 230 observations read from the data set WORK.OUTRULES_TREE_0R2J4SA.
NOTE: The data set WORK.TEMPVAR has 8 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12075  proc sort data=templabel;
12076  by node;
12077  run;

NOTE: Input data set is empty.
NOTE: The data set WORK.TEMPLABEL has 0 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12078  proc sort data=tempvar;
12079  by node;
12080  run;

NOTE: There were 8 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 8 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12081  data tempbelow;
12082  merge templabel tempvar;
12083  by node;
12084  if missing(belowtext) then belowtext= character_value;
12085  keep node belowtext;
12086  run;

NOTE: There were 0 observations read from the data set WORK.TEMPLABEL.
NOTE: There were 8 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPBELOW has 8 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12087  proc sort data=tempbelow;
12088  by node;
12089  run;

NOTE: There were 8 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.TEMPBELOW has 8 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12090  /* abovetext */
12091  data tempoutrules;
12092  set WORK.OUTRULES_TREE_0R2J4SA;
12093  if ((ROLE='PRIMARY') AND(STAT in ("INTERVAL", "ORDINAL", "NOMINAL")));
12094  run;

NOTE: There were 230 observations read from the data set WORK.OUTRULES_TREE_0R2J4SA.
NOTE: The data set WORK.TEMPOUTRULES has 9 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12095  proc sort data=tempoutrules;
12096  by node numeric_value;
12097  run;

NOTE: There were 9 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPOUTRULES has 9 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12098  data tempabove;
12099  set tempoutrules(rename=(node=parent));
12100  by parent numeric_value;
12101  retain abovetext tempstring flag branch origval origchar;
12102  *length abovetext tempstring origchar $45;
12103  length abovetext $256;
12104  length tempstring origchar $64;
12105  if STAT in ("INTERVAL", "ORDINAL") then do;
12106  if first.parent then do;
12107  if missing(character_value) then do;
12108  numeric_value = round(numeric_value, 0.0001);
12109  abovetext = "< "||strip(NUMERIC_VALUE);
12110  branch = 1;
12111  origval = numeric_value;
12112  output;
12113  end;
12114  else do;
12115  abovetext = "< "||strip(CHARACTER_VALUE);
12116  branch = 1;
12117  origchar = character_value;
12118  output;
12119  end;
12120  if first.parent AND last.parent then do;
12121  if missing(character_value) then do;
12122  numeric_value = round(numeric_value, 0.0001);
12123  branch = branch + 1;
12124  abovetext = ">= "||strip(NUMERIC_VALUE);
12125  output;
12126  end;
12127  else do;
12128  branch = branch + 1;
12129  abovetext = ">= "||strip(CHARACTER_VALUE);
12130  output;
12131  end;
12132  end;
12133  end;
12134  else if last.parent then do;
12135  if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
12136  if missing(character_value) then do;
12137  numeric_value = round(numeric_value, 0.0001);
12138  abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
12139  end;
12140  else do;
12141  abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
12142  end;
12143  branch = branch + 1;
12144  output;
12145  if missing(character_value) then do;
12146  numeric_value = round(numeric_value, 0.0001);
12147  abovetext = ">= "||strip(NUMERIC_VALUE);
12148  end;
12149  else do;
12150  abovetext = ">= "||strip(CHARACTER_VALUE);
12151  end;
12152  branch = branch + 1;
12153  output;
12154  end;
12155  else do;
12156  if missing(character_value) then do;
12157  numeric_value = round(numeric_value, 0.0001);
12158  abovetext = ">= "||strip(NUMERIC_VALUE);
12159  end;
12160  else do;
12161  abovetext = ">= "||strip(CHARACTER_VALUE);
12162  end;
12163  branch = branch + 1;
12164  output;
12165  end;
12166  end;
12167  else do;
12168  if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
12169  if missing(character_value) then do;
12170  numeric_value = round(numeric_value,0.0001);
12171  abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
12172  origval = numeric_value;
12173  end;
12174  else do;
12175  abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
12176  origchar = character_value;
12177  end;
12178  branch = branch + 1;
12179  output;
12180  end;
12181  else do;
12182  if missing(character_value) then do;
12183  numeric_value = round(numeric_value, 0.0001);
12184  abovetext = ">= "||strip(NUMERIC_VALUE);
12185  origval = numeric_value;
12186  end;
12187  else do;
12188  abovetext = ">= "||strip(CHARACTER_VALUE);
12189  origval = character_value;
12190  end;
12191  branch = branch + 1;
12192  output;
12193  end;
12194  end;
12195  end;
12196  else do;
12197  if first.numeric_value then do;
12198  flag = 0;
12199  abovetext = CHARACTER_VALUE;
12200  branch = numeric_value;
12201  if first.numeric_value AND last.numeric_value then do;
12202  output;
12203  end;
12204  end;
12205  else if last.numeric_value then do;
12206  if flag=0 then do;
12207  tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
12208  length = length(strip(tempstring));
12209  if length < 32 then do;
12210  abovetext = strip(tempstring);
12211  end;
12212  else do;
12213  abovetext = strip(abovetext)||", ...";
12214  flag = 1;
12215  end;
12216  end;
12217  branch = numeric_value;
12218  output;
12219  end;
12220  else do;
12221  if flag=0 then do;
12222  tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
12223  length = length(strip(tempstring));
12224  if length < 32 then do;
12225  abovetext = strip(tempstring);
12226  end;
12227  else do;
12228  abovetext = strip(abovetext)||", ...";
12229  flag=1;
12230  end;
12231  end;
12232  branch = numeric_value;
12233  end;
12234  end;
12235  keep parent branch abovetext;
12236  run;

NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      12109:25   12124:26   12138:24   12138:47   12147:26   12158:26   12171:24   12171:47   12184:26   
NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      12189:11   
NOTE: There were 9 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPABOVE has 16 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12237  /* MIssing value to abovetext */
12238  data tempmissing;
12239  set WORK.OUTRULES_TREE_0R2J4SA;
12240  if ((ROLE="PRIMARY") AND (STAT in ("MISSING")));
12241  rename node=parent numeric_value=branch character_value=misschar;
12242  run;

NOTE: There were 230 observations read from the data set WORK.OUTRULES_TREE_0R2J4SA.
NOTE: The data set WORK.TEMPMISSING has 8 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12243  proc sort data=work.tempabove;
12244  by parent branch;
12245  run;

NOTE: There were 16 observations read from the data set WORK.TEMPABOVE.
NOTE: The data set WORK.TEMPABOVE has 16 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12246  proc sort data=EMWS1.Clus_OUTNODES out=tempoutnodes;
12247  by parent branch;
12248  run;

NOTE: There were 17 observations read from the data set EMWS1.CLUS_OUTNODES.
NOTE: The data set WORK.TEMPOUTNODES has 17 observations and 26 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12249  proc sort data=tempmissing;
12250  by parent branch;
12251  run;

NOTE: There were 8 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.TEMPMISSING has 8 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12252  data WORK.Clus_outnodes;
12253  merge work.tempabove tempoutNodes(drop=abovetext ) tempmissing(in=_a);
12254  by parent branch;
12255  length traintotal validtotal 8;
12256  retain traintotal validtotal;
12257  if _a then do;
12258  if ^MISSING(abovetext) then do;
12259  abovetext= strip(abovetext)||" %sysfunc(sasmsg(sashelp.dmine, tree_ormiss_vlabel, noquote))";
12260  end;
12261  else do;
12262  abovetext = " %sysfunc(sasmsg(sashelp.dmine, tree_missonly_vlabel, noquote))";
12263  end;
12264  end;
12265  if MISSING(abovetext) then abovetext="%sysfunc(sasmsg(sashelp.dmine, tree_nonmiss_vlabel, noquote))";
12266  if node=1 then do;
12267  traintotal = N;
12268  validtotal=VN;
12269  end;
12270  label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
12271  drop role rank stat misschar belowtext;
12272  run;

NOTE: Variable VN is uninitialized.
NOTE: There were 16 observations read from the data set WORK.TEMPABOVE.
NOTE: There were 17 observations read from the data set WORK.TEMPOUTNODES.
NOTE: There were 8 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.CLUS_OUTNODES has 17 observations and 28 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12273  proc sort data=WORK.Clus_outnodes;
12274  by node;
12275  run;

NOTE: There were 17 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: The data set WORK.CLUS_OUTNODES has 17 observations and 28 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12276  proc sort data=tempbelow;
12277  by node;
12278  run;

NOTE: Input data set is already sorted, no sorting done.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12279  data WORK.Clus_outnodes;
12280  merge WORK.Clus_outnodes tempbelow;
12281  by node;
12282  run;

NOTE: There were 17 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: There were 8 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.CLUS_OUTNODES has 17 observations and 29 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

NOTE: There were 10000 observations read from the data set EMWS1.FIMPORT_DATA.
NOTE: There were 10000 observations read from the data set EMWS1.FIMPORT_TRAIN.
NOTE: There were 2037 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: View EMWS1.EM_CLUS.VIEW used (Total process time):
      real time           0.18 seconds
      cpu time            0.18 seconds
      
NOTE: There were 2037 observations read from the data set EMWS1.CLUS_TRAIN.
12283  data tempoutstats;
12284  set WORK.OUTSTATS_TREE_0R2J4SA;
12285  length tarlevel $8;
12286  tarlevel ="NOMINAL";
12287  run;

NOTE: There were 119 observations read from the data set WORK.OUTSTATS_TREE_0R2J4SA.
NOTE: The data set WORK.TEMPOUTSTATS has 119 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12288  data EMWS1.Clus_TREE_PLOT;
12289  length NODETEXT TEXTALL $800 N NODECOLOR 8;
12290  set WORK.Clus_outnodes;
12291  label parent = "%sysfunc(sasmsg(sashelp.dmine, rpt_parentID_vlabel, noquote))" depth = "%sysfunc(sasmsg(sashelp.dmine, rpt_depth_vlabel, noquote))" belowtext= "%sysfunc(sasmsg(sashelp.dmine, rpt_belowtext_vlabel, noquote))" abovetext =
12292     "%sysfunc(sasmsg(sashelp.dmine, rpt_abovetext_vlabel, noquote))" linkwidth = "%sysfunc(sasmsg(sashelp.dmine, rpt_linkwidth_vlabel, noquote))" nodetext = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodetext_vlabel, noquote))" textall =
12293     "%sysfunc(sasmsg(sashelp.dmine, rpt_textall_vlabel, noquote))" N = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainn_vlabel, noquote))" nodecolor = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodecolor_vlabel, noquote))" node =
12294     "%sysfunc(sasmsg(sashelp.dmine, rpt_node_vlabel, noquote))";
12295  keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR;
12296  run;

NOTE: Variable TEXTALL is uninitialized.
NOTE: Variable NODECOLOR is uninitialized.
NOTE: There were 17 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 17 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12297  proc sort data=EMWS1.Clus_TREE_PLOT;
12298  by node;
12299  run;

NOTE: There were 17 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 17 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12300  proc sort data=tempoutstats;
12301  by node;
12302  run;

NOTE: There were 119 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set WORK.TEMPOUTSTATS has 119 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12303  data EMWS1.Clus_TREE_PLOT;
12304  merge EMWS1.Clus_TREE_PLOT tempoutstats;
12305  length text $800 _RASE_ P__SEGMENT_1 8;
12306  retain P__SEGMENT_1 eventlevel;
12307  by node;
12308  if statname='N' then N=statvalue;
12309  if statname='NPRIORS' then N=statvalue;
12310  if statname='PREDICTION' then eventlevel=category;
12311  _RASE_ = .;
12312  if tarlevel ^= 'INTERVAL' then do;
12313  if STATNAME = 'PROBABILITY' then do;
12314  if CATEGORY=EVENTLEVEL then do;
12315  nodetext = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
12316  text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
12317  P__SEGMENT_1 = round(STATVALUE, .01);
12318  end;
12319  else do;
12320  text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
12321  end;
12322  textall = strip(textall)||'0A'x||strip( text);
12323  end;
12324  if last.node then do;
12325  nodetext = trim(nodetext)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
12326  textall = trim(textall)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
12327  output EMWS1.Clus_TREE_PLOT;
12328  end;
12329  end;
12330  else do;
12331  if statname='RASE' then _RASE_=statvalue;
12332  label _RASE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_trase_vlabel, noquote))";
12333  if STATNAME = 'PREDICTION' then do;
12334  nodetext= "%sysfunc(sasmsg(sashelp.dmine, rpt_average_vlabel, noquote))"|| put(STATVALUE, 13.4)||'0A'x|| "%sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
12335  textall = nodetext;
12336  P__SEGMENT_1 = STATVALUE;
12337  ;
12338  ;
12339  end;
12340  if last.node then do;
12341  output EMWS1.Clus_TREE_PLOT;
12342  end;
12343  ;
12344  end;
12345  label P__SEGMENT_1 = "%sysfunc(sasmsg(sashelp.dmine, rpt_predictedvar_vlabel, noquote))";
12346  keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR _RASE_ P__SEGMENT_1;
12347  run;

NOTE: There were 17 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: There were 119 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 17 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12348  data tempcolor;
12349  set WORK.OUTSTATS_TREE_0R2J4SA;
12350  retain eventlevel;
12351  if STATNAME='PREDICTION' then eventlevel=CATEGORY;
12352  run;

NOTE: There were 119 observations read from the data set WORK.OUTSTATS_TREE_0R2J4SA.
NOTE: The data set WORK.TEMPCOLOR has 119 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12353  data tempcolor;
12354  set tempcolor;
12355  if 'NOMINAL' ne 'INTERVAL' then do;
12356  if CATEGORY=EVENTLEVEL AND STATNAME="PROBABILITY";
12357  end;
12358  else do;
12359  if STATNAME="PREDICTION";
12360  end;
12361  run;

NOTE: There were 119 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 17 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12362  data tempcolor;
12363  set tempcolor;
12364  length nodecolor 8;
12365  if 'NOMINAL' ne 'INTERVAL' then do;
12366  nodecolor = round(100*(STATVALUE), .01);
12367  end;
12368  else do;
12369  nodecolor=round(statvalue, .01);
12370  end;
12371  keep node nodecolor;
12372  run;

NOTE: There were 17 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 17 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12373  proc sort data=EMWS1.Clus_TREE_PLOT;
12374  by node;
12375  run;

NOTE: There were 17 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 17 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12376  proc sort data=tempcolor;
12377  by node;
12378  run;

NOTE: There were 17 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 17 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12379  data EMWS1.Clus_TREE_PLOT;
12380  merge EMWS1.Clus_TREE_PLOT tempcolor;
12381  by node;
12382  length traintotal 8;
12383  retain traintotal;
12384  label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
12385  if node=1 then do;
12386  traintotal = N;
12387  end;
12388  if NODE eq . then delete;
12389  run;

NOTE: There were 17 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: There were 17 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 17 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

12390  data EMWS1.Clus_TREE_PLOT;
12391  set EMWS1.Clus_TREE_PLOT;
12392  textall = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodeId_vlabel, noquote, )):"|| put(Node, 13.)||'0A'x||trim(textall);
12393  run;

NOTE: There were 17 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 17 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12394  data tempout;
12395  set WORK.Clus_outnodes;
12396  run;

NOTE: There were 17 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: The data set WORK.TEMPOUT has 17 observations and 29 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12397  proc sort data=tempout;
12398  by descending P__SEGMENT_1;
12399  run;

NOTE: There were 17 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TEMPOUT has 17 observations and 29 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12400  data tree_temp;
12401  set tempout;
12402  if LEAF ne .;
12403  label index="%sysfunc(sasmsg(sashelp.dmine, rpt_leafindex_vlabel  , NOQUOTE))";
12404  label percevent_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_perc_train_vlabel  , NOQUOTE))";
12405  label perc_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_percevent_train_vlabel  , NOQUOTE))";
12406  label tprob="%sysfunc(sasmsg(sashelp.dmine, rpt_prob_vlabel  , NOQUOTE, %nrbquote()))";
12407  tprob = round(P__SEGMENT_1, .01);
12408  percevent_train = round ( tprob*100, .01);
12409  *perc_train =round( ( N / traintotal)*100, .001);
12410  perc_train =round( ( N / traintotal), .01);
12411  if missing(perc_train) then perc_train = round( linkwidth*100, .001);
12412  index = _n_;
12413  keep NODE index tprob perc_train percevent_train
12414  ;
12415  run;

NOTE: There were 17 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TREE_TEMP has 9 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

12416  proc sort data=tree_temp;
12417  by NODE;
12418  run;

NOTE: There were 9 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set WORK.TREE_TEMP has 9 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12419  proc sort data=EMWS1.Clus_TREE_PLOT;
12420  by NODE;
12421  run;

NOTE: There were 17 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 17 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12422  data EMWS1.Clus_TREE_PLOT;
12423  merge EMWS1.Clus_TREE_PLOT tree_temp;
12424  by NODE;
12425  run;

NOTE: There were 17 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: There were 9 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 17 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12426  proc sort data=EMWS1.Clus_TREE_PLOT;
12427  by node index;
12428  run;

NOTE: There were 17 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 17 observations and 17 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12429  title9 ' ';
12430  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_VariableImportance_title, NOQUOTE))";
12431  proc print data=EMWS1.Clus_OUTIMPORT(where=(IMPORTANCE>0)) noobs label;
12432  run;

NOTE: There were 7 observations read from the data set EMWS1.CLUS_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12433  title10;

12434  data WORK.M06ZRI51;
12435  set WORK.M06ZRI51;
12436  if role eq 'REJECTED' then role = 'INPUT';
12437  run;

NOTE: There were 11 observations read from the data set WORK.M06ZRI51.
NOTE: The data set WORK.M06ZRI51 has 11 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12438  proc sort data=EMWS1.Clus_OUTIMPORT out=WORK.Clus_GRAPHVARS(keep=NAME);
12439  where IMPORTANCE>0;
12440  by NAME;
12441  run;

NOTE: There were 7 observations read from the data set EMWS1.CLUS_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The data set WORK.CLUS_GRAPHVARS has 7 observations and 1 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12442  proc sort data = WORK.M06ZRI51;
12443  by NAME;
12444  run;

NOTE: There were 11 observations read from the data set WORK.M06ZRI51.
NOTE: The data set WORK.M06ZRI51 has 11 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12445  data WORK.M06ZRI51;
12446  merge WORK.M06ZRI51 WORK.Clus_GRAPHVARS(in=_b_);
12447  by NAME;
12448  if _b_ or ROLE = "FREQ" or REPORT="Y" then output;
12449  run;

NOTE: There were 11 observations read from the data set WORK.M06ZRI51.
NOTE: There were 7 observations read from the data set WORK.CLUS_GRAPHVARS.
NOTE: The data set WORK.M06ZRI51 has 7 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12450  data WORK.M06ZRI51;
12451  set WORK.M06ZRI51 end=_eof_ nobs=_nobs_;
12452  output;
12453  if _eof_ then do;
12454  name = '_SEGMENT_';
12455  ROLE = 'BY';
12456  LEVEL = 'NOMINAL';
12457  LABEL = 'Segment Variable';
12458  TYPE = 'N';
12459  FORMAT = '';
12460  INFORMAT = '';
12461  output;
12462  end;
12463  run;

NOTE: There were 7 observations read from the data set WORK.M06ZRI51.
NOTE: The data set WORK.M06ZRI51 has 8 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12464  *------------------------------------------------------------* ;
12465  * Clus: STDIZE Variables Macro ;
12466  *------------------------------------------------------------* ;
12467  %macro stdizevar;
12468      Age Balance CreditScore EstimatedSalary NumOfProducts Tenure
12469  %mend stdizevar;
12470  *------------------------------------------------------------*;
12471  * Clus: Computing Summary Statistics;
12472  *------------------------------------------------------------*;
12473  proc stdize
12474  data = EMWS1.Clus_TRAIN
12475  out=_null_
12476  outstat=WORK.Clus_STAT
12477  add=0 fuzz=1E-14 initial=MAD
12478  vardef=df
12479  method=STD
12480  mult=1
12481  pctlmtd=ORD_STAT pctldef=2
12482  pctlpts=(
12483  0
12484  100
12485  )
12486  ;
12487  var %stdizevar;
12488  run;

NOTE: INITIAL= will be ignored.
NOTE: There were 10000 observations read from the data set EMWS1.FIMPORT_DATA.
NOTE: There were 10000 observations read from the data set EMWS1.FIMPORT_TRAIN.
NOTE: View EMWS1.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds
      
NOTE: There were 2037 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: There were 2037 observations read from the data set EMWS1.CLUS_TRAIN.
NOTE: The data set WORK.CLUS_STAT has 10 observations and 7 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.17 seconds
      cpu time            0.18 seconds
      

12489  quit;

12490  data WORK.Clus_MINMAX;
12491  set WORK.Clus_STAT;
12492  where _TYPE_ in('P0','P100');
12493  if _TYPE_='P0' then _TYPE_='MIN';
12494  else if _TYPE_='P100' then _TYPE_='MAX';
12495  run;

NOTE: There were 2 observations read from the data set WORK.CLUS_STAT.
      WHERE _TYPE_ in ('P0', 'P100');
NOTE: The data set WORK.CLUS_MINMAX has 2 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12496  proc transpose data=WORK.Clus_MINMAX out=WORK.Clus_MINMAX(drop=_LABEL_ rename=(_NAME_=_VARIABLE_));
12497  id _TYPE_;
12498  run;

WARNING: The variable _LABEL_ in the DROP, KEEP, or RENAME list has never been referenced.
NOTE: There were 2 observations read from the data set WORK.CLUS_MINMAX.
NOTE: The data set WORK.CLUS_MINMAX has 6 observations and 3 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12499  data WORK.Clus_UGRID;
12500  set WORK.Clus_MINMAX;
12501  B1 = MIN + (1-1)*(MAX-MIN)/8;
12502  B2 = MIN + (2-1)*(MAX-MIN)/8;
12503  B3 = MIN + (3-1)*(MAX-MIN)/8;
12504  B4 = MIN + (4-1)*(MAX-MIN)/8;
12505  B5 = MIN + (5-1)*(MAX-MIN)/8;
12506  B6 = MIN + (6-1)*(MAX-MIN)/8;
12507  B7 = MIN + (7-1)*(MAX-MIN)/8;
12508  B8 = MIN + (8-1)*(MAX-MIN)/8;
12509  B9 = MIN + (9-1)*(MAX-MIN)/8;
12510  drop MIN MAX;
12511  run;

NOTE: There were 6 observations read from the data set WORK.CLUS_MINMAX.
NOTE: The data set WORK.CLUS_UGRID has 6 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12512  *------------------------------------------------------------*;
12513  * Clus: Creating formats for binning interval variables;
12514  *------------------------------------------------------------*;
12515  proc format;
12516  value F1_
12517  18-26.25 = "18:26.25"
12518  26.25-34.5 = "26.25:34.5"
12519  34.5-42.75 = "34.5:42.75"
12520  42.75-51 = "42.75:51"
12521  51-59.25 = "51:59.25"
12522  59.25-67.5 = "59.25:67.5"
12523  67.5-75.75 = "67.5:75.75"
12524  75.75-84 = "75.75:84"
12525  ;
NOTE: Format F1_ has been output.
12526  value F2_
12527  0-31362.26125 = "0:31362"
12528  31362.26125-62724.5225 = "31362:62725"
12529  62724.5225-94086.78375 = "62725:94087"
12530  94086.78375-125449.045 = "94087:125449"
12531  125449.045-156811.30625 = "125449:156811"
12532  156811.30625-188173.5675 = "156811:188174"
12533  188173.5675-219535.82875 = "188174:219536"
12534  219535.82875-250898.09 = "219536:250898"
12535  ;
NOTE: Format F2_ has been output.
12536  value F3_
12537  350-412.5 = "350:412.5"
12538  412.5-475 = "412.5:475"
12539  475-537.5 = "475:537.5"
12540  537.5-600 = "537.5:600"
12541  600-662.5 = "600:662.5"
12542  662.5-725 = "662.5:725"
12543  725-787.5 = "725:787.5"
12544  787.5-850 = "787.5:850"
12545  ;
NOTE: Format F3_ has been output.
12546  value F4_
12547  11.58-24986.145 = "11.58:24986"
12548  24986.145-49960.71 = "24986:49961"
12549  49960.71-74935.275 = "49961:74935"
12550  74935.275-99909.84 = "74935:99910"
12551  99909.84-124884.405 = "99910:124884"
12552  124884.405-149858.97 = "124884:149859"
12553  149858.97-174833.535 = "149859:174834"
12554  174833.535-199808.1 = "174834:199808"
12555  ;
NOTE: Format F4_ has been output.
12556  value F5_
12557  1-1.375 = "1:1.375"
12558  1.375-1.75 = "1.375:1.75"
12559  1.75-2.125 = "1.75:2.125"
12560  2.125-2.5 = "2.125:2.5"
12561  2.5-2.875 = "2.5:2.875"
12562  2.875-3.25 = "2.875:3.25"
12563  3.25-3.625 = "3.25:3.625"
12564  3.625-4 = "3.625:4"
12565  ;
NOTE: Format F5_ has been output.
12566  value F6_
12567  0-1.25 = "0:1.25"
12568  1.25-2.5 = "1.25:2.5"
12569  2.5-3.75 = "2.5:3.75"
12570  3.75-5 = "3.75:5"
12571  5-6.25 = "5:6.25"
12572  6.25-7.5 = "6.25:7.5"
12573  7.5-8.75 = "7.5:8.75"
12574  8.75-10 = "8.75:10"
12575  ;
NOTE: Format F6_ has been output.
12576  run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12577  ods listing close;
12578  ods output crosstabfreqs=WORK.TEMPFREQ;
12579  proc freq data = EMWS1.Clus_TRAIN order=formatted addnames;
12580  table Age * _SEGMENT_ / missing;
12581  table Balance * _SEGMENT_ / missing;
12582  table CreditScore * _SEGMENT_ / missing;
12583  table EstimatedSalary * _SEGMENT_ / missing;
12584  table HasCreditCard * _SEGMENT_ / missing;
12585  table NumOfProducts * _SEGMENT_ / missing;
12586  table Tenure * _SEGMENT_ / missing;
12587  format AGE F1_.;
12588  format BALANCE F2_.;
12589  format CREDITSCORE F3_.;
12590  format ESTIMATEDSALARY F4_.;
12591  format NUMOFPRODUCTS F5_.;
12592  format TENURE F6_.;
12593  run;

NOTE: There were 10000 observations read from the data set EMWS1.FIMPORT_DATA.
NOTE: There were 10000 observations read from the data set EMWS1.FIMPORT_TRAIN.
NOTE: View EMWS1.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.12 seconds
      cpu time            0.14 seconds
      
NOTE: There were 2037 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: The data set WORK.TEMPFREQ has 318 observations and 18 variables.
NOTE: There were 2037 observations read from the data set EMWS1.CLUS_TRAIN.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds
      

12594  quit;
12595  ods listing;
12596  data EMWS1.Clus_PROFILE(keep=_VARIABLE_ _SEGMENT_ TYPE COUNT PERCENT _X_ _XLABEL_);
12597  label _VARIABLE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel, NOQUOTE))" _SEGMENT_ = "Segment Variable" Type = "%sysfunc(sasmsg(sashelp.dmine, rpt_type_vlabel,         NOQUOTE))" _X_ =
12598     "%sysfunc(sasmsg(sashelp.dmine, rpt_numValue_vlabel, NOQUOTE))" _XLABEL_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_fmtValue_vlabel ,    NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel,        NOQUOTE))" PERCENT =
12599     "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel,      NOQUOTE))";
12600  dsid = open("WORK.TEMPFREQ");
12601  varnum = varnum(dsid, 'ROWVARIABLE');
12602  freqnum = varnum(dsid, 'FREQUENCY');
12603  pvarnum = varnum(dsid, 'PERCENT');
12604  typenum = varnum(dsid, '_TYPE_');
12605  bynum = varnum(dsid, "_SEGMENT_");
12606  length varformat _VARIABLE_ $32 _XLABEL_ $32 TYPE $1;
12607  do while(^fetch(dsid));
12608  count = getvarn(dsid, freqnum);
12609  percent = getvarn(dsid, pvarnum);
12610  _VARIABLE_ = strip(getvarc(dsid, varnum));
12611  varblnum = varnum(dsid, _VARIABLE_);
12612  _SEGMENT_ = getvarn(dsid, bynum);
12613  type = vartype(dsid, varblnum);
12614  varformat = varfmt(dsid, varblnum);
12615  if varformat eq '' then varformat = 'best12.';
12616  _X_=.;
12617  if type = 'N' then do;
12618  _X_ = getvarn(dsid, varblnum);
12619  _XLABEL_ = left(putn(_X_, varformat));
12620  end;
12621  else _XLABEL_ = getvarc(dsid, varblnum);
12622  if getvarc(dsid, typenum) = '11' then output;
12623  end;
12624  dsid = close(dsid);
12625  run;

NOTE: The data set EMWS1.CLUS_PROFILE has 230 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.03 seconds
      

12626  proc sort data=EMWS1.Clus_PROFILE NOTHREADS;
12627  by _VARIABLE_ _SEGMENT_;
12628  run;

NOTE: There were 230 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set EMWS1.CLUS_PROFILE has 230 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12629  proc means data=EMWS1.Clus_PROFILE noprint missing NWAY;
12630  class _VARIABLE_ _SEGMENT_;
12631  var COUNT;
12632  output out=WORK.Clus_STATCOUNT(keep=_SEGMENT_ _VARIABLE_ SUM) SUM=SUM;
12633  run;

NOTE: There were 230 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set WORK.CLUS_STATCOUNT has 35 observations and 3 variables.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12634  proc sort data=WORK.Clus_STATCOUNT NOTHREADS;
12635  by _VARIABLE_ _SEGMENT_;
12636  run;

NOTE: There were 35 observations read from the data set WORK.CLUS_STATCOUNT.
NOTE: The data set WORK.CLUS_STATCOUNT has 35 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12637  data EMWS1.Clus_PROFILE(drop=SUM);
12638  label BYPERCENT= "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel, NOQUOTE, _SEGMENT_))";
12639  merge EMWS1.Clus_PROFILE WORK.Clus_STATCOUNT;
12640  by _VARIABLE_ _SEGMENT_;
12641  if SUM ne . then BYPERCENT = 100*COUNT/SUM;
12642  run;

NOTE: There were 230 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: There were 35 observations read from the data set WORK.CLUS_STATCOUNT.
NOTE: The data set EMWS1.CLUS_PROFILE has 230 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12643  proc sort data=EMWS1.Clus_PROFILE NOTHREADS;
12644  by _VARIABLE_;
12645  run;

NOTE: There were 230 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set EMWS1.CLUS_PROFILE has 230 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12646  proc sort data=WORK.M06ZRI51;
12647  by Name;
12648  run;

NOTE: There were 8 observations read from the data set WORK.M06ZRI51.
NOTE: The data set WORK.M06ZRI51 has 8 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12649  data EMWS1.Clus_PROFILE;
12650  merge EMWS1.Clus_PROFILE(in=_a) WORK.M06ZRI51(keep=Name Label Role rename=(Name=_Variable_ Label=_Label_));
12651  by _Variable_;
12652  label Role = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel ,  NOQUOTE))";
12653  label Label = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel , NOQUOTE))";
12654  if _a then output;
12655  run;

NOTE: Variable Label is uninitialized.
WARNING: Multiple lengths were specified for the BY variable _VARIABLE_ by input data sets. This might cause unexpected results.
NOTE: There were 230 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: There were 8 observations read from the data set WORK.M06ZRI51.
NOTE: The data set EMWS1.CLUS_PROFILE has 230 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12656  proc sort data=EMWS1.Clus_PROFILE;
12657  by _SEGMENT_ _VARIABLE_ _X_;
12658  run;

NOTE: There were 230 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set EMWS1.CLUS_PROFILE has 230 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12659  data EMWS1.Clus_PROFILE(rename=(_VARIABLE_=Variable _X_=NumericValue _XLABEL_=FmtValue));
12660  set EMWS1.Clus_PROFILE;
12661  retain orderedValue 0;
12662  label OrderedValue = "%sysfunc(sasmsg(sashelp.dmine, rpt_OrderedValue_vlabel, NOQUOTE))";
12663  by _SEGMENT_ _VARIABLE_;
12664  if first._variable_ then orderedValue=1;
12665  else orderedValue+1;
12666  run;

NOTE: There were 230 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set EMWS1.CLUS_PROFILE has 230 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12667  proc transpose data=EMWS1.Clus_OUTVAR out=WORK.Clus_OUTVAR(where=(COL1 ^in('IMPUTED','OMITTED')));
12668  var Age--IsActiveMemberYes;
12669  where _TYPE_ in('TYPE' 'VARIABLE');
12670  run;

NOTE: There were 2 observations read from the data set EMWS1.CLUS_OUTVAR.
      WHERE _TYPE_ in ('TYPE', 'VARIABLE');
NOTE: The data set WORK.CLUS_OUTVAR has 15 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

12671  *------------------------------------------------------------* ;
12672  * Clus: DMVQ Variables;
12673  *------------------------------------------------------------* ;
12674  %macro dmvqvars;
12675      Age Balance CreditScore EstimatedSalary NumOfProducts Tenure CountryFrance
12676     CountryGermany CountrySpain GenderFemale GenderMale HasCreditCardNo
12677     HasCreditCardYes IsActiveMemberNo IsActiveMemberYes
12678  %mend ;
12679  
12680  

12681  data WORK.Clus_temp;
12682  set EMWS1.Clus_OUTMEAN;
12683  _idvar_=left(put(_SEGMENT_,4.));
12684  run;

NOTE: There were 5 observations read from the data set EMWS1.CLUS_OUTMEAN.
NOTE: The data set WORK.CLUS_TEMP has 5 observations and 25 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12685  proc distance data=WORK.Clus_temp out=EMWS1.Clus_DISTANCE method=l(2) shape=square;
12686  id _idvar_;
12687  var interval(%dmvqvars);
12688  run;

NOTE: The data set EMWS1.CLUS_DISTANCE has 5 observations and 6 variables.
NOTE: PROCEDURE DISTANCE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12689  proc mds data=EMWS1.Clus_DISTANCE out=WORK.Clus_mds level=absolute nohist shape=square dim=3;
12690  object _idvar_;
12691  run;

NOTE: Convergence assumed because the badness-of-fit criterion 1.1693589E-7 is less than or equal to MINCRIT=1E-6.
NOTE: The data set WORK.CLUS_MDS has 6 observations and 8 variables.
NOTE: PROCEDURE MDS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12692  quit;
12693  data WORK.Clus_mds;
12694  set WORK.Clus_mds;
12695  if _type_ ne 'CONFIG' then delete;
12696  run;

NOTE: There were 6 observations read from the data set WORK.CLUS_MDS.
NOTE: The data set WORK.CLUS_MDS has 5 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12697  data WORK.Clus_mds(label="&label" keep=_idvar_ _radius_ dim1 dim2 dim3);
WARNING: Apparent symbolic reference LABEL not resolved.
12698  merge WORK.Clus_temp WORK.Clus_mds;
12699  run;

NOTE: There were 5 observations read from the data set WORK.CLUS_TEMP.
NOTE: There were 5 observations read from the data set WORK.CLUS_MDS.
NOTE: The data set WORK.CLUS_MDS has 5 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12700  options nodate;
12701  title1 "%sysfunc(sasmsg(sashelp.dmine, rpt_ClusterDistance_title, NOQUOTE))";
12702  %plotit(data=WORK.Clus_mds, datatype=mds, radii=_radius_, labelvar=_idvar_, symtype=circle, symbols='*', gout=WORK.Clus, gname=DISTANCE, gopts2=nodisplay, gopts=device=GIF, gopplot=cback=white, titlecol=black, labelcol=black, tickcol=black,
12703     framecol=black, post=C:\Users\20161277\AppData\Local\Temp\27\SAS Temporary Files\_TD72384_BA-TEACHING_\plotit.ps);

                                                                                                                    Types Legend  | CONFIG
                                                                                                                    --------------+---------
                                                                                                                    Symbol Types  | circle
                                                                                                                    Symbols       | *
                                                                                                                    Symbol Colors | cx000000
                                                                                                                    Label  Colors | cx000000
                                                                                                                    Symbol Sizes  | 1
                                                                                                                    Label  Sizes  | 1
                                                                                                                    Symbol Fonts  | none
                                                                                                                    Label  Fonts  | none
                                                                                                                    ------------------------

                                                                                                         Iterative Scatter Plot of Labeled Points Macro

                                                                                                    Iteration    Place    Line Size    Page Size    Penalty
                                                                                                    -------------------------------------------------------
                                                                                                        1          2         65           45            0

The following code will create the printer plot on which the graphical plot is based:

options nonumber ls=65 ps=45;
proc plot nolegend formchar='|----|+|---' data=preproc vtoh=2;
   plot Dim2 * Dim1 $ _idvar_ = _symbol_ /
        haxis=by 25000 vaxis=by 25000 box list=1
        placement=((h=2 -2 : s=right left) (v=1 -1 * h=0 -1 to -5 by alt));
   label Dim2 = 'Dimension 2' Dim1 = 'Dimension 1';
   label Dim2 = '#' Dim1 = '#';
   run; quit;

The plot was created with the following goptions:

goptions nodisplay hpos=79 vpos=30 hsize=8.33in vsize=6.24in cback=white device=GIF;

The OUT=anno Annotate data set has 170 observations.
The PLOTIT macro used 0.8 seconds to create OUT=anno.
12704  goptions display;
12705  title;

12706  filename gsasfile "C:\Users\20161277\Documents\CA Assignment
12706! 3\Workspaces\EMWS1\Clus\GRAPH\Distance.gif";
12707  goptions reset=all device=PNG display gaccess= gsasfile gsfmode= replace cback= white;
12708  proc greplay igout=WORK.Clus nofs;
NOTE: Building list of graphs from the catalog.

NOTE: Enter greplay commands or statements.
12709  replay DISTANCE;
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this 
      session.
NOTE: 16674 bytes written to C:\Users\20161277\Documents\CA Assignment 
      3\Workspaces\EMWS1\Clus\GRAPH\Distance.gif.
12710  quit;

NOTE: PROCEDURE GREPLAY used (Total process time):
      real time           0.12 seconds
      cpu time            0.12 seconds
      

12711  goptions reset=all;
12712  filename gsasfile;
NOTE: Fileref GSASFILE has been deassigned.

12713  proc datasets lib=EMWS1 nolist;
12714  modify Clus_DISTANCE;
12715  rename _idvar_=_SEGMENT_;
NOTE: Renaming variable _idvar_ to _SEGMENT_.
12716  run;

NOTE: MODIFY was successful for EMWS1.CLUS_DISTANCE.DATA.
12717  quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12718  *------------------------------------------------------------*;
12719  * Clus: Creating data set for Input Mean report;
12720  *------------------------------------------------------------*;
12721  data temp(drop=_type_ over_all);
12722  set EMWS1.Clus_OUTSTAT;
12723  where _type_ in('DMDB_MEAN', 'CLUS_MEAN');
12724  run;

NOTE: There were 6 observations read from the data set EMWS1.CLUS_OUTSTAT.
      WHERE _type_ in ('CLUS_MEAN', 'DMDB_MEAN');
NOTE: The data set WORK.TEMP has 6 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12725  proc sort data=temp;
12726  by _SEGMENT_;
12727  run;

NOTE: There were 6 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 6 observations and 16 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12728  proc stdize data=temp out=stdtemp pctlpts=0 100 outstat=stat;
12729  var Age--IsActiveMemberYes;
12730  run;

NOTE: There were 6 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.STDTEMP has 6 observations and 16 variables.
NOTE: The data set WORK.STAT has 10 observations and 16 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12731  proc transpose data=stat out=tstat(rename=(COL1=MEAN COL2=STD COL3=MIN COL4=MAX));
12732  where _type_ in ('LOCATION', 'SCALE','P0', 'P100');
12733  run;

NOTE: There were 4 observations read from the data set WORK.STAT.
      WHERE _type_ in ('LOCATION', 'P0', 'P100', 'SCALE');
NOTE: The data set WORK.TSTAT has 15 observations and 6 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12734  data tstat( rename=(_NAME_=NAME) keep=_NAME_ cv stdmin stdmax);
12735  set tstat;
12736  if std ^in (0, .) then do;
12737  stdmin = abs((min-mean)/std);
12738  stdmax = abs((max-mean)/std);
12739  end;
12740  if mean ^in(0, .) then cv = std/mean;
12741  run;

NOTE: There were 15 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 15 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12742  proc sort data=tstat;
12743  by NAME;
12744  run;

NOTE: There were 15 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 15 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12745  proc transpose data=stdtemp out=tstdtemp(rename=(_NAME_=NAME _LABEL_=LABEL COL1=MEAN));
12746  by _SEGMENT_;
12747  run;

NOTE: There were 6 observations read from the data set WORK.STDTEMP.
NOTE: The data set WORK.TSTDTEMP has 90 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12748  proc sort data=tstdtemp;
12749  by NAME;
12750  run;

NOTE: There were 90 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set WORK.TSTDTEMP has 90 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12751  data tstdtemp;
12752  merge tstdtemp tstat;
12753  by NAME;
12754  STDMEAN = (MEAN + stdmin)/(stdmin + stdmax);
12755  drop stdmin stdmax mean;
12756  run;

NOTE: There were 90 observations read from the data set WORK.TSTDTEMP.
NOTE: There were 15 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTDTEMP has 90 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12757  proc transpose data=EMWS1.Clus_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME
12757! VARIABLE=INPUT));
12758  var Age--IsActiveMemberYes;
12759  id _type_;
12760  where _type_ = 'VARIABLE';
12761  run;

NOTE: There were 1 observations read from the data set EMWS1.CLUS_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 15 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12762  proc sort data=tempVar;
12763  by NAME;
12764  run;

NOTE: There were 15 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 15 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12765  data EMWS1.Clus_INPUTMEAN(rename=(NAME=VARIABLE));
12766  Length _SEGMENT_CHAR_ $7;
12767  label _SEGMENT_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentName_vlabel,  NOQUOTE))"
12767! _SEGMENT_CHAR_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentId_vlabel,    NOQUOTE))" NAME =
12767! "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel,     NOQUOTE))" INPUT =
12768     "%sysfunc(sasmsg(sashelp.dmine, rpt_input_vlabel,        NOQUOTE))" LABEL =
12768! "%sysfunc(sasmsg(sashelp.dmine, rpt_label_vlabel,        NOQUOTE))" CV =
12768! "%sysfunc(sasmsg(sashelp.dmine, rpt_cv_vlabel,           NOQUOTE))" STDMEAN =
12769     "%sysfunc(sasmsg(sashelp.dmine, rpt_normmean_vlabel,     NOQUOTE))";
12770  merge tempvar tstdtemp;
12771  by NAME;
12772  if LABEL='' then LABEL=NAME;
12773  _SEGMENT_CHAR_ = strip(put(_SEGMENT_, best.));
12774  if _SEGMENT_ = . then _SEGMENT_CHAR_='Overall';
12775  run;

NOTE: There were 15 observations read from the data set WORK.TEMPVAR.
NOTE: There were 90 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set EMWS1.CLUS_INPUTMEAN has 90 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

12776  proc sort data=EMWS1.Clus_INPUTMEAN;
12777  by descending cv;
12778  run;

NOTE: There were 90 observations read from the data set EMWS1.CLUS_INPUTMEAN.
NOTE: The data set EMWS1.CLUS_INPUTMEAN has 90 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12779  *------------------------------------------------------------*;
12780  * Clus: Determining the important variables;
12781  *------------------------------------------------------------*;

12782  %let _nobs = 0;
12783  data keepvars(rename=(NAME=INPUT));
12784  set EMWS1.Clus_OUTIMPORT(where=(IMPORTANCE>0.5)) end=eof;
12785  if eof then call symput('_nobs', strip(put(_N_, best.)));
12786  run;

NOTE: There were 5 observations read from the data set EMWS1.CLUS_OUTIMPORT.
      WHERE IMPORTANCE>0.5;
NOTE: The data set WORK.KEEPVARS has 5 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12787  proc transpose data=EMWS1.Clus_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME
12787! VARIABLE=INPUT));
12788  var Age--IsActiveMemberYes;
12789  id _type_;
12790  where _type_ = 'VARIABLE';
12791  run;

NOTE: There were 1 observations read from the data set EMWS1.CLUS_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 15 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

12792  proc sort data=keepvars;
12793  by INPUT;
12794  run;

NOTE: There were 5 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.KEEPVARS has 5 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12795  proc sort data=tempvar;
12796  by INPUT;
12797  run;

NOTE: There were 15 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 15 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12798  data vars;
12799  merge tempvar keepvars(in=b);
12800  by INPUT;
12801  if b then output;
12802  run;

WARNING: Multiple lengths were specified for the BY variable INPUT by input data sets. This might 
         cause unexpected results.
NOTE: There were 15 observations read from the data set WORK.TEMPVAR.
NOTE: There were 5 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.VARS has 6 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12803  proc sort data=vars;
12804  by descending importance;
12805  run;

NOTE: There were 6 observations read from the data set WORK.VARS.
NOTE: The data set WORK.VARS has 6 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12806  data _null_;
12807  set vars;
12808  if _N_=1 then call symput('CLUS_PROFVARS', strip(NAME));
12809  else call symput('CLUS_PROFVARS',symget('CLUS_PROFVARS')!!' '!!strip(NAME));
12810  run;

NOTE: There were 6 observations read from the data set WORK.VARS.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12811  *------------------------------------------------------------*;
12812  * mergeVarMeansandClusLabel;
12813  *------------------------------------------------------------*;
12814  data temp(keep=_SEGMENT_ &CLUS_PROFVARS);
12815  length _SEGMENT_ &CLUS_PROFVARS 8;
12816  set EMWS1.Clus_OUTSTAT;
12817  where _type_ ='CLUS_MEAN';
12818  run;

NOTE: There were 5 observations read from the data set EMWS1.CLUS_OUTSTAT.
      WHERE _type_='CLUS_MEAN';
NOTE: The data set WORK.TEMP has 5 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

12819  proc sort data=temp;
12820  by _SEGMENT_;
12821  run;

NOTE: There were 5 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 5 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12822  data EMWS1.Clus_LABEL;
12823  merge EMWS1.Clus_LABEL(keep=_SEGMENT_ LABEL) temp;
12824  by _SEGMENT_;
12825  run;

NOTE: There were 5 observations read from the data set EMWS1.CLUS_LABEL.
NOTE: There were 5 observations read from the data set WORK.TEMP.
NOTE: The data set EMWS1.CLUS_LABEL has 5 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

